## v1.3.1 - Admin Portal Improvements
**Release Date:** January 10, 2026
**Status:** Production Ready

### Overview

Admin portal quality-of-life improvements including navigation fixes, validation enhancements, and database query optimizations to prevent connection pool exhaustion.

### Bug Fixes

#### **Admin Navigation Highlighting**
- Fixed: Dashboard was always highlighted in the nav panel regardless of current page
- Now correctly highlights only the active section

#### **Database Connection Pool Exhaustion**
- Fixed: Admin pages hanging indefinitely due to parallel database queries overwhelming Vercel Postgres connection pool
- Changed all admin queries from `Promise.all()` to sequential execution
- Affected pages: Dashboard, Mappings, Validation, Talk Edit

### New Features

#### **Mappings Missing Long Rationale Validation**
- New validation issue type: "Mappings Missing Long Rationale"
- Shows all card-talk mappings that have no long rationale written
- Click directly navigates to the mappings interface for that specific card
- Displays card image, card name, talk title, and existing short rationale

### Removed

#### **"Talks with Only YouTube URL" Validation**
- Removed this validation issue type as it's expected behavior
- TEDx talks and non-TED talks will commonly only have YouTube URLs

### Files Modified

#### Database Queries
```
lib/db/queries/admin-validation.ts  # Added mappingsMissingLongRationale, removed talksWithOnlyYoutubeUrl
lib/db/queries/admin-talks.ts       # Sequential queries in getTalksStats()
```

#### Admin Pages
```
app/admin/page.tsx                  # Sequential queries for dashboard stats
app/admin/mappings/page.tsx         # Sequential queries
app/admin/validation/page.tsx       # Updated summary calculation
app/api/admin/validation/route.ts   # Updated summary calculation
```

#### Components
```
components/admin/ui/AdminNav.tsx                    # Fixed isActive() for dashboard
components/admin/validation/ValidationDashboard.tsx # New issue type, removed YouTube-only
components/admin/validation/IssueCard.tsx           # New missingLongRationale rendering
```

### Technical Notes

- All admin database queries now run sequentially to use only 1 connection at a time
- Vercel Postgres free tier has limited connections (typically 1-10)
- Pages may be marginally slower but will load reliably instead of hanging

### Migration Notes

No database changes required. This is a frontend/query optimization release.
